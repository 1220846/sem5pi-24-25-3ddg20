<div class="card flex justify-content-end mr-2">
    <p-button (onClick)="showDialog()" [outlined]="true" severity="primary" icon="pi pi-pencil"/>
    <p-dialog header="Update Patient Profile" [modal]="true" [(visible)]="visible" [style]="{ width: '40rem', maxHeight: '40rem' }" [appendTo]="'body'">
        <p-toast></p-toast>
        <div class="p-fluid dialog-content">
            <div class="flex flex-column gap-2 mb-2 input-large">
                <form [formGroup]="patientForm" class="dialog-form">
                    <div class="p-fluid content">
                        <div class="flex flex-wrap gap-7">
                            <div class="flex flex-column gap-2 mb-3 input-medium">
                                <label for="firstName">First Name</label>
                                <input pInputText id="firstName" formControlName="firstName"
                                    aria-describedby="firstName-help" />
                                <small
                                    *ngIf="patientForm.controls['firstName'].invalid && (patientForm.controls['firstName'].dirty || patientForm.controls['firstName'].touched)"
                                    class="p-error">
                                    Valid firstName is required.
                                </small>
                            </div>
                            <div class="flex flex-column gap-2 mb-3 input-medium">
                                <label for="lastName">Last Name</label>
                                <input pInputText id="lastName" formControlName="lastName"
                                    aria-describedby="lastName-help" />
                                <small
                                    *ngIf="patientForm.controls['lastName'].invalid && (patientForm.controls['lastName'].dirty || patientForm.controls['lastName'].touched)"
                                    class="p-error">
                                    Valid last name is required.
                                </small>
                            </div>
                        </div>
                            <div class="flex flex-column gap-2 mb-3 input-large">
                                <label for="fullName">Full Name</label>
                                <input pInputText id="fullName" formControlName="fullName"
                                    aria-describedby="fullName-help" />
                                <small
                                    *ngIf="patientForm.controls['fullName'].invalid && (patientForm.controls['fullName'].dirty || patientForm.controls['fullName'].touched)"
                                    class="p-error">
                                    Valid full name is required.
                                </small>
                            </div>
                        <div class="flex flex-wrap gap-7">
                            <div class="flex flex-column gap-2 mb-3 input-mediuml">
                              <label for="address">Address</label>
                              <input pInputText id="address" formControlName="address" aria-describedby="address-help" />
                              <small *ngIf="patientForm.controls['address'].invalid && (patientForm.controls['address'].dirty || patientForm.controls['address'].touched)" class="p-error">
                                Address is required.
                              </small>
                            </div>
                            <div class="flex flex-column gap-2 mb-3 input-small">
                              <label for="postalCode">Postal Code</label>
                              <input pInputText id="postalCode" formControlName="postalCode" aria-describedby="postalCode-help" />
                              <small *ngIf="patientForm.controls['postalCode'].invalid && (patientForm.controls['postalCode'].dirty || patientForm.controls['postalCode'].touched)" class="p-error">
                                Valid postal code is required (e.g., 1234-567).
                              </small>
                            </div>
                          </div>
                          <div class="flex flex-wrap gap-7">
                            <div class="flex flex-column gap-2 mb-3 input-mediuml">
                                <label for="email">Email</label>
                                <input pInputText id="email" formControlName="email" aria-describedby="email-help" />
                                <small
                                    *ngIf="patientForm.controls['email'].invalid && (patientForm.controls['email'].dirty || patientForm.controls['email'].touched)"
                                    class="p-error">
                                    Valid email is required.
                                </small>
                            </div>
                            <div class="flex flex-column gap-2 mb-3 input-small">
                                <label for="phoneNumber">Phone Number</label>
                                <input pInputText id="phoneNumber" formControlName="phoneNumber" />
                                <small
                                    *ngIf="patientForm.controls['phoneNumber'].invalid && (patientForm.controls['phoneNumber'].dirty || patientForm.controls['phoneNumber'].touched)"
                                    class="p-error">
                                    Valid phone number is required.
                                </small>
                            </div>
                        </div>
                        <div class="flex flex-wrap mt-2 gap-7 inputButton">
                            <p-button (onClick)="showEditMedicalConditions()" label="Edit Medical Conditions" severity="secondary" [style]="{ width: '32rem', }"></p-button>
                            <p-dialog header="Medical Conditions" [(visible)]="mVisible" [style]="{ width: '60rem', 'max-height': '40rem' }">
                                <textarea pInputTextarea id="medicalConditions" formControlName="medicalConditions" rows="5" [autoResize]="true"></textarea>
                            </p-dialog>
                        </div>
                    </div>  
                    
                </form>
                <div class="flex justify-content-center mt-2 gap-2 dialog-footer">
                    <p-button label="Save" (click)="saveData()" icon="pi pi-check"></p-button>
                    <p-button label="Cancel" (click)="closeDialog()" icon="pi pi-times" severity="secondary"></p-button>
                </div>
            </div>
        </div>
    </p-dialog>
</div>