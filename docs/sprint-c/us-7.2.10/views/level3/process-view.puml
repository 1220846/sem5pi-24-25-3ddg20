@startuml process-view
autonumber
skinparam DefaultTextAlignment center
actor Admin as "Admin"

box "<<system (C4)>>\nFrontend"#LightBlue
    participant ComponentUI as "UI Component" <<component (C4)>>
    participant Component as "Component" <<component (C4)>>
    participant Model as "Model" <<component (C4)>>
    participant Service as "Service" <<component (C4)>>
    participant HTTP as "HTTP" <<component (C4)>>
end box

box "<<system (C4)>>\nBackend Node"
    participant Router as "RoomTypeRouter"<<Router>>
    participant Controller as "RoomTypeController"<<Controller>>
    participant Service_ as "RoomTypeService"<<Service>>
    participant RoomType as "RoomType"<<Domain>>
    participant RoomTypeMap as "RoomTypeMap"<<Mapper>>
    database RoomTypeRepo as "RoomTypeRepo"<<Domain>>
end box

activate Admin

    Admin -> ComponentUI : asks to add new type of room
    activate ComponentUI

        ComponentUI --> Admin : asks to input data

    deactivate ComponentUI

    Admin -> ComponentUI : input data
    activate ComponentUI

        ComponentUI -> Component : add new type of room

        activate Component

            Component -> Model** : create
            
            Component -> Service : add new type of room
            activate Service

                Service -> HTTP : post('/roomtypes')

                activate HTTP
                    HTTP -> Router : POST /roomtypes

                    activate Router

                        Router -> Controller : addRoomType(req,res,next)

                        activate Controller
                            Controller -> Service_ : addRoomType(roomTypeDto)
                            
                            activate Service_

                                Service_ -> RoomType**: create(roomTypeDTO)

                                activate RoomType
                                    RoomType --> Service_ : roomType
                                deactivate RoomType

                                Service_ -> RoomTypeRepo : save(roomType)

                                Service_ -> RoomTypeMap : toDTO(roomType)

                                activate RoomTypeMap

                                    RoomTypeMap --> Service_ : roomTypeDTO

                                deactivate RoomTypeMap
                                
                                Service_ --> Controller : roomTypeDTO

                            deactivate Service_

                            Controller --> Router : roomTypeDTO

                        deactivate Controller

                        Router --> HTTP : 201 (roomtype)

                    deactivate Router

                    HTTP --> Service : roomtype

                deactivate HTTP

                Service --> Component : roomtype
            deactivate Service

            Component --> ComponentUI : roomtype
        deactivate Component

    Admin <-- ComponentUI : shows success message
    deactivate ComponentUI

deactivate Admin

@enduml